<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>デュエルチェスター — Official</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --red:#e53935;
      --blue:#1e88e5;
      --green:#43a047;
      --yellow:#fdd835;
      --bg:#fafafa;
      --muted:#555;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Noto Sans JP',sans-serif;background:var(--bg);color:#333;}

    header{background:white;box-shadow:0 2px 6px rgba(0,0,0,0.06);position:sticky;top:0;z-index:50;padding:14px 28px;display:flex;align-items:center;justify-content:space-between}
    .logo{font-weight:900;font-size:22px;color:var(--red)}
    nav{display:flex;gap:18px}
    nav a{text-decoration:none;color:var(--muted);font-weight:700}
    .btn{padding:10px 16px;border-radius:24px;background:var(--red);color:white;font-weight:800;text-decoration:none;box-shadow:0 4px 12px rgba(0,0,0,0.12)}

    .hero{padding:60px 28px;text-align:center;background:linear-gradient(180deg,#fff,#f5f5f5)}
    .hero h1{font-size:42px;margin:0;color:var(--red)}
    .hero p{color:var(--muted);margin:12px 0 20px}

    .section-title{font-size:28px;font-weight:900;margin:40px 0 20px;text-align:center;color:var(--red)}

    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;padding:0 28px 40px}
    .card-item{background:white;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,0.08);overflow:hidden;transition:transform .2s}
    .card-item:hover{transform:translateY(-4px)}
    .card-item img{width:100%;height:320px;object-fit:cover;display:block}
    .card-body{padding:14px}
    .card-body h3{margin:0 0 8px;font-size:18px;color:var(--blue)}
    .card-body p{margin:0;color:var(--muted);font-size:14px;line-height:1.5}

    footer{padding:28px;text-align:center;color:var(--muted);background:#fff;border-top:1px solid #f0f0f0;font-size:14px}

    @media(max-width:860px){
      .hero h1{font-size:32px}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo"><img src="C:\Users\moritamikoto\Documents\saito\yoko.png" alt="ロゴ"width="175"height="25"></div>
    <nav>
      <a href="#explanation">ルール説明</a>
      <a href="#cards">カード紹介</a>
      <a href="#chat">チャット</a>
    </nav>
    <a class="btn" href="#download">ダウンロードする</a>
  </header>

  <main>
    <section class="hero">
      <img src="C:\Users\moritamikoto\Documents\saito\rogo.png" alt="ロゴ"width="280"height="200">
      <p>神秘と戦略が交錯する新しいカードゲームの世界へようこそ。</p>

    </section>
<section id="explanation" style="text-align:center;padding:40px 28px">
      <h2 class="section-title">ルール説明</h2>
      <p>従来のチェスにカードゲームの要素が＋</p>
      <p>チェス</p>
      <p>チェス</p>
    </section>

    <section id="cards">
      <h2 class="section-title">カード紹介</h2>
      <p style="color:var(--muted)">属性</p>
      <div class="cards">
        <div class="card-item">
          <img src="C:\Users\moritamikoto\Documents\saito\どらごん.png" alt="ドラゴン"width="300"height="420">
          <div class="card-body">
            <h3>ドラゴン</h3>
            <p>火属性の伝説級ドラゴン。盤面に出ると相手全体に炎ダメージを与える。</p>
          </div>
        </div>
        <div class="card-item">
          <img src="https://placehold.co/300x420" alt="ドラゴン">
          <div class="card-body">
            <h3>ドラゴン</h3>
            <p>火属性の伝説級ドラゴン。盤面に出ると相手全体に炎ダメージを与える。</p>
          </div>
        </div>
        <div class="card-item">
          <img src="https://placehold.co/300x420" alt="ドラゴン">
          <div class="card-body">
            <h3>ドラゴン</h3>
            <p>火属性の伝説級ドラゴン。盤面に出ると相手全体に炎ダメージを与える。</p>
          </div>
        </div>
        <div class="card-item">
          <img src="https://placehold.co/300x420" alt="ドラゴン">
          <div class="card-body">
            <h3>ドラゴン</h3>
            <p>火属性の伝説級ドラゴン。盤面に出ると相手全体に炎ダメージを与える。</p>
          </div>
        </div>
        <div class="card-item">
          <img src="https://placehold.co/300x420" alt="ドラゴン">
          <div class="card-body">
            <h3>ドラゴン</h3>
            <p>火属性の伝説級ドラゴン。盤面に出ると相手全体に炎ダメージを与える。</p>
          </div>
        </div>
        <div class="card-item">
          <img src="https://placehold.co/300x420" alt="ドラゴン">
          <div class="card-body">
            <h3>ドラゴン</h3>
            <p>火属性の伝説級ドラゴン。盤面に出ると相手全体に炎ダメージを与える。</p>
          </div>
        </div>

      </div>
    </section>

<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>コメント欄（ツリー式返信対応）</title>
<style>
  body { font-family: "Segoe UI", sans-serif; background: #fff; margin: 40px; }
  .comment-box { max-width: 750px; margin: auto; }
  textarea { width: 100%; padding: 8px; border-radius: 6px; }
  button { margin-top: 6px; cursor: pointer; padding: 6px 10px; border-radius: 6px; }
  .comment, .reply {
    background: #f9f9f9; padding: 10px; border-radius: 10px;
    margin-top: 10px; position: relative;
  }
  .reply { background: #f0f0f0; margin-left: 25px; }
  .nickname { font-weight: bold; }
  .timestamp { font-size: 11px; color: gray; margin-left: 5px; }
  .reply-button { font-size: 12px; color: #007BFF; background: none; border: none; cursor: pointer; padding: 0; margin-top: 4px; }
  .reply-form { margin-top: 8px; }
</style>
</head>
<body>
<div class="comment-box">
  <h2>コメント欄（ツリー式返信対応）</h2>
  <input id="nicknameInput" placeholder="ニックネーム" style="width:100%;padding:8px;margin-bottom:6px;">
  <textarea id="newComment" rows="3" placeholder="コメントを入力..."></textarea>
  <button id="postBtn">投稿</button>
  <div id="commentsContainer"></div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBn_w4fPZlFXqfiwYzJzUKuW10LdJyV-AA",
    authDomain: "comments-1910e.firebaseapp.com",
    databaseURL: "https://comments-1910e-default-rtdb.firebaseio.com",
    projectId: "comments-1910e",
    storageBucket: "comments-1910e.firebasestorage.app",
    messagingSenderId: "126460518015",
    appId: "1:126460518015:web:0595fd3bd496224c8c294a",
    measurementId: "G-SXTPFYM6V5"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const commentsRef = ref(db, "comments");

  const postBtn = document.getElementById("postBtn");
  const newComment = document.getElementById("newComment");
  const nicknameInput = document.getElementById("nicknameInput");
  const commentsContainer = document.getElementById("commentsContainer");

  postBtn.addEventListener("click", () => {
    const text = newComment.value.trim();
    const nick = nicknameInput.value.trim() || "匿名";
    if (!text) return alert("コメントを入力してください。");
    push(commentsRef, makeComment(nick, text));
    newComment.value = "";
  });

  function makeComment(author, text) {
    return { author, text, timestamp: Date.now(), replies: {} };
  }

  // 🔁 コメントツリーをリアルタイムで描画
  onValue(commentsRef, (snapshot) => {
    commentsContainer.innerHTML = "";
    const data = snapshot.val();
    if (!data) return;
    const comments = Object.entries(data).reverse();
    comments.forEach(([id, c]) => renderComment(id, c, commentsContainer, 0));
  });

  // 🧩 再帰的にコメントを描画
  function renderComment(id, comment, container, level) {
    const div = document.createElement("div");
    div.className = level === 0 ? "comment" : "reply";
    const time = new Date(comment.timestamp).toLocaleString();

    div.innerHTML = `
      <div><span class="nickname">${comment.author}</span>
      <span class="timestamp">${time}</span></div>
      <div>${comment.text}</div>
      <button class="reply-button" data-id="${id}">返信する</button>
      <div class="children"></div>
    `;

    const children = div.querySelector(".children");
    if (comment.replies) {
      const replies = Object.entries(comment.replies);
      replies.forEach(([rid, reply]) => renderComment(rid, reply, children, level + 1));
    }

    // 返信ボタン押下
    const replyBtn = div.querySelector(".reply-button");
    replyBtn.addEventListener("click", () => {
      showReplyForm(containerPath(id, level), children);
    });

    container.appendChild(div);
  }

  // 🔍 Firebaseの階層パスを取得
  function containerPath(id, level) {
    if (level === 0) return `comments/${id}/replies`;
    return `comments/${id}`;
  }

  // ✏️ 返信フォーム
  function showReplyForm(path, parentDiv) {
    const existingForm = parentDiv.querySelector(".reply-form");
    if (existingForm) existingForm.remove();

    const form = document.createElement("div");
    form.className = "reply-form";
    form.innerHTML = `
      <input type="text" placeholder="ニックネーム" class="reply-nick" style="width:100%;padding:6px;margin-top:4px;">
      <textarea class="reply-text" rows="2" style="width:100%;margin-top:4px;"></textarea>
      <button class="send-reply">返信を投稿</button>
    `;
    parentDiv.appendChild(form);

    const sendBtn = form.querySelector(".send-reply");
    sendBtn.addEventListener("click", () => {
      const nick = form.querySelector(".reply-nick").value.trim() || "匿名";
      const text = form.querySelector(".reply-text").value.trim();
      if (!text) return alert("返信を入力してください。");
      const replyRef = ref(db, path);
      push(replyRef, makeComment(nick, text));
      form.remove();
    });
  }
</script>
</body>
</html>

  </main>

 </body>
</html>


